#!/bin/bash

echo "ðŸ“‹ SAMENVATTING: Azure OIDC Setup Script Wijzigingen"
echo "====================================================="

echo ""
echo "ðŸ”„ PARAMETER VOLGORDE WIJZIGINGEN:"
echo "=================================="
echo ""
echo "ðŸ”´ OUDE volgorde:"
echo "   1. app-name"
echo "   2. github-org"
echo "   3. github-repo"
echo "   4. branch"
echo "   5. subscription-id"
echo "   6. [verbose|management-group]"
echo "   7. [management-group-name]"
echo ""
echo "ðŸŸ¢ NIEUWE volgorde:"
echo "   1. subscription-id (ðŸ†• EERSTE parameter)"
echo "   2. app-name"
echo "   3. github-org"
echo "   4. github-repo"
echo "   5. branch"
echo "   6. [verbose|management-group]"
echo "   7. [management-group-name]"
echo ""

echo "ðŸ¤– SUBSCRIPTION LOGICA:"
echo "======================="
echo ""
echo "âœ… SCENARIO 1: Subscription ID meegegeven"
echo "   â†’ Script gebruikt de opgegeven subscription"
echo "   â†’ Valideert of subscription toegankelijk is"
echo "   â†’ Switcht automatisch naar deze subscription"
echo ""
echo "âœ… SCENARIO 2: Geen subscription ID + 1 subscription gevonden"
echo "   â†’ Script gebruikt automatisch de enige beschikbare subscription"
echo "   â†’ Geen gebruikersinteractie nodig"
echo ""
echo "âœ… SCENARIO 3: Geen subscription ID + meerdere subscriptions gevonden"
echo "   â†’ Script toont lijst met alle beschikbare subscriptions"
echo "   â†’ Voor elke subscription wordt complete curl command getoond"
echo "   â†’ Gebruiker kan copy/paste gebruiken om opnieuw te draaien"
echo "   â†’ Script stopt met exit code 0 (geen fout)"
echo ""

echo "ðŸ“ USAGE VOORBEELDEN:"
echo "==================="
echo ""
echo "1ï¸âƒ£  Basis gebruik (eenvoudigst):"
echo "   curl -s https://raw.githubusercontent.com/CXNSMB/onboarding/main/setup-app-registration.sh | bash -s -- \"SUBSCRIPTION-ID\""
echo ""
echo "2ï¸âƒ£  Met custom app naam:"
echo "   curl -s https://raw.githubusercontent.com/CXNSMB/onboarding/main/setup-app-registration.sh | bash -s -- \"SUBSCRIPTION-ID\" \"my-app\""
echo ""
echo "3ï¸âƒ£  Volledige configuratie:"
echo "   curl -s https://raw.githubusercontent.com/CXNSMB/onboarding/main/setup-app-registration.sh | bash -s -- \"SUBSCRIPTION-ID\" \"my-app\" \"my-org\" \"my-repo\" \"main\""
echo ""
echo "4ï¸âƒ£  Met verbose mode:"
echo "   curl -s https://raw.githubusercontent.com/CXNSMB/onboarding/main/setup-app-registration.sh | bash -s -- \"SUBSCRIPTION-ID\" \"my-app\" \"my-org\" \"my-repo\" \"main\" \"verbose\""
echo ""
echo "5ï¸âƒ£  Met management group:"
echo "   curl -s https://raw.githubusercontent.com/CXNSMB/onboarding/main/setup-app-registration.sh | bash -s -- \"SUBSCRIPTION-ID\" \"my-app\" \"my-org\" \"my-repo\" \"main\" \"management-group\" \"my-mg\""
echo ""
echo "6ï¸âƒ£  Automatische detectie (geen subscription ID):"
echo "   curl -s https://raw.githubusercontent.com/CXNSMB/onboarding/main/setup-app-registration.sh | bash -s --"
echo ""

echo "ðŸ’¡ VOORDELEN:"
echo "============"
echo ""
echo "âœ… Subscription ID is nu de EERSTE en meest belangrijke parameter"
echo "âœ… Eenvoudiger syntax: alleen subscription ID is vaak genoeg"
echo "âœ… Intelligente auto-detectie bij 1 subscription"
echo "âœ… Gebruiksvriendelijke lijst bij meerdere subscriptions"
echo "âœ… Copy/paste ready curl commands"
echo "âœ… Geen interactieve input meer nodig"
echo "âœ… Perfect voor automation en CI/CD"
echo "âœ… Backward compatible (nog steeds mogelijk om alle parameters mee te geven)"
echo ""

echo "ðŸ” HOE SUBSCRIPTION ID TE VINDEN:"
echo "================================="
echo ""
echo "ðŸ“‹ Lijst alle subscriptions:"
echo "   az account list --query \"[].{name:name, id:id}\" --output table"
echo ""
echo "ðŸ“‹ Huidige subscription:"
echo "   az account show --query \"id\" --output tsv"
echo ""
echo "ðŸ“‹ Subscription van specifieke resource group:"
echo "   az group show --name \"my-rg\" --query \"id\" --output tsv | cut -d'/' -f3"
echo ""

echo "ðŸŽ¯ REAL WORLD EXAMPLE:"
echo "====================="
echo ""
current_sub=$(az account show --query "id" -o tsv 2>/dev/null || echo "SUBSCRIPTION-ID")
echo "Voor jouw huidige subscription:"
echo "   curl -s https://raw.githubusercontent.com/CXNSMB/onboarding/main/setup-app-registration.sh | bash -s -- \"$current_sub\" \"my-github-app\" \"my-org\" \"my-repo\" \"main\""
echo ""

echo "âœ… Script is nu klaar voor productie gebruik!"
